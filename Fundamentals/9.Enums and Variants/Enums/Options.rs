// The Option Enum 
// ในภาษาอื่น (เช่น Java, C++, Python) ถ้าเราสร้างตัวแปรมาแล้วมันไม่มีค่า (เป็น Null) แล้วเราเผลอไปเรียกใช้มัน... ตูม! โปรแกรมพังทันที (Crash/Null Pointer Exception)

// Rust บอกว่า "แบบนี้มันอันตราย" Rust เลย ตัด Null ทิ้งออกจากภาษา แล้วสร้างสิ่งที่เรียกว่า Option มาแทน

// Option คือ กล่องห่อของขวัญ
// มี 2 ช่อง: Some(ของ) หรือ None (กล่องเปล่า)
// ชื่อเล่น ของคน
// บางคนมีชื่อเล่น -> Some("ตั้ม") หรือ None ("ไม่มีชื่อเล่น")

fn main() {
    // คนที่ 1: มีของ (ห่อใส่กล่อง Some)
    let nickname_1: Option<&str> = Some("ตั้ม");

    // คนที่ 2: ไม่มีของ (ให้กล่องเปล่า None)
    let nickname_2: Option<&str> = None;

    // --- วิธีใช้งาน (ต้องแกะกล่องก่อนเสมอ) ---
    // Rust บังคับให้เราเช็กทุกครั้ง ห้ามมั่วหยิบไปใช้เลย
    
    check_gift(nickname_1); // ผล: เย้! มีชื่อเล่นคือ ตั้ม
    check_gift(nickname_2); // ผล: เสียใจด้วย ไม่มีชื่อเล่น
}

fn check_gift(box_val: Option<&str>) {
    match box_val {
        Some(name) => println!("เย้! มีชื่อเล่นคือ {}", name),
        None => println!("เสียใจด้วย ไม่มีชื่อเล่น"),
    }
}

// ผู้อ่านอาจสงสัยว่า "ทำไมไม่ใช้ Null ง่ายๆ ล่ะ? 
// ความปลอดภัย
// ภาษาอื่น: หยิบของได้เลย -> ถ้าไม่มีของ -> พัง
// Rust ยื่นกล่อง Option มาให้ -> คุณยังหยิบไม่ได้ -> คุณต้องเขียนโค้ด match เพื่อแกะกล่องก่อนเสมอ -> รับประกันว่าโปรแกรมไม่มีทางพังเพราะ Null

// Option Enum คือ กล่องที่อาจจะมีของ หรือ ไม่มีของ ก็ได้

enum Option<T> {
    Some(T), // มีของ (T คือชนิดข้อมูลอะไรก็ได้)
    None,    // ไม่มีของ (ว่างเปล่า)
}

// ข้อดี: บังคับให้โปรแกรมเมอร์ "เตรียมใจ" รับมือกับความว่างเปล่าเสมอ
// ทำให้ไม่มีทางเกิด Error แบบ "หาไม่เจอแล้วโปรแกรมดับ"

// วิธีใช้งาน: ยื่นกล่อง Option มาให้ แล้วต้องแกะกล่องก่อนเสมอ
// ถ้าเป็น Some ก็แกะออกมา ถ้าเป็น None ก็ต้องรับมือกับว่างเปล่า

fn main() {
    let my_option: Option<&str> = Some("ตั้ม");
    match my_option {
        Some(name) => println!("ชื่อเล่นคือ {}", name),
        None => println!("ไม่มีชื่อเล่น"),
    }
}
